<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <meta name="theme-color" content="#8B1538">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Miele Laundry Guide</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{--b:#8B1538;--bd:#6D1029;--g:#C9A962;--sf:#FAFAFA;--c:#FFF;--sk:#F3F3F3;--sb:#F7F7F7;--t:#1A1A1A;--tm:#6B6B6B;--tf:#9A9A9A;--br:#E8E8E8;--s:#2D7D46;--sbg:#E8F5EC;--w:#B45309;--wbg:#FEF3C7;--e:#C41E3A;--ebg:#FEE2E7;--r:14px;--rl:20px}
    html{font-size:16px;-webkit-font-smoothing:antialiased}
    body{font-family:'DM Sans',-apple-system,BlinkMacSystemFont,sans-serif;background:var(--sf);color:var(--t);min-height:100dvh;line-height:1.5;-webkit-tap-highlight-color:transparent}
    .a{max-width:440px;margin:0 auto;padding:16px;min-height:100dvh}
    @media(min-width:640px){.a{padding:32px 24px}}
    .s{background:var(--c);border-radius:var(--rl);padding:20px;margin-bottom:14px;box-shadow:0 1px 3px rgba(0,0,0,.04),0 4px 12px rgba(0,0,0,.04)}
    .st{font-size:.75rem;font-weight:600;color:var(--b);text-transform:uppercase;letter-spacing:.08em;margin-bottom:14px}
    .rs{display:flex;flex-direction:column;gap:8px}
    .r{display:flex;align-items:center;gap:14px;padding:14px 18px;background:var(--sb);border:2px solid transparent;border-radius:50px;font-size:.9375rem;font-weight:500;color:var(--t);cursor:pointer;transition:border-color .15s,background .15s;user-select:none;-webkit-user-select:none}
    .r:hover{border-color:var(--b);background:#FDF8F9}
    .r:active{transform:scale(.99)}
    .r.x{border-color:var(--b);background:linear-gradient(135deg,#FDF8F9,#FCF5F6)}
    .ri,.rc,.sw,.si{width:22px;height:22px;flex-shrink:0}
    .ri{color:var(--tf)}
    .r.x .ri,.r.x .si{color:var(--b)}
    .rl{flex:1;text-align:left}
    .rc{border-radius:50%;border:2px solid var(--br);background:#fff;display:flex;align-items:center;justify-content:center;transition:background .15s,border-color .15s}
    .r.x .rc{background:var(--b);border-color:var(--b)}
    .rc svg{width:12px;height:12px;color:#fff;opacity:0;transition:opacity .15s}
    .r.x .rc svg{opacity:1}
    .sw{border-radius:50%}
    .sw-w{background:#FFF;box-shadow:inset 0 0 0 2px var(--br)}
    .sw-l{background:linear-gradient(135deg,#F5E6D3,#FDF5E6)}
    .sw-b{background:linear-gradient(135deg,#3B82F6,#EC4899 50%,#F59E0B)}
    .sw-d{background:linear-gradient(135deg,#1F2937,#374151)}
    .sw-m{background:conic-gradient(#FFF 0deg,#F5E6D3 90deg,#3B82F6 180deg,#1F2937 270deg);box-shadow:inset 0 0 0 1px var(--br)}
    .si{display:flex;align-items:center;justify-content:center;color:var(--tf)}
    .si svg{width:20px;height:20px}
    .bg,.br{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;cursor:pointer;border:none;font-family:inherit;transition:all .15s}
    .bg{padding:18px 24px;border-radius:14px;font-size:1rem;font-weight:600;background:linear-gradient(135deg,var(--b),var(--bd));color:#fff;box-shadow:0 4px 14px rgba(139,21,56,.35);margin-bottom:14px}
    .bg:hover{box-shadow:0 6px 20px rgba(139,21,56,.45)}
    .bg:active,.br:active{transform:scale(.98)}
    .bg:disabled{background:var(--br);color:var(--tf);box-shadow:none;cursor:not-allowed;transform:none}
    .bg svg{width:18px;height:18px}
    .br{padding:14px;border-radius:12px;font-size:.875rem;font-weight:500;background:var(--sk);color:var(--tm)}
    .br:hover{background:var(--br);color:var(--t)}
    .br svg{width:16px;height:16px}
    .re{background:var(--c);border-radius:var(--rl);padding:24px 20px;margin-bottom:14px;box-shadow:0 2px 8px rgba(0,0,0,.06),0 8px 24px rgba(0,0,0,.08)}
    .rh{text-align:center;margin-bottom:24px}
    .rx{width:64px;height:64px;margin:0 auto 16px;background:var(--sbg);border-radius:50%;display:flex;align-items:center;justify-content:center}
    .rx svg{width:32px;height:32px;color:var(--s)}
    .rt{font-size:1.375rem;font-weight:700;letter-spacing:-.02em}
    .wa{background:var(--wbg);border-radius:var(--r);padding:16px 18px;margin-bottom:14px}
    .wt,.ph,.ah,.dt,.at,.tt{display:flex;align-items:center;gap:8px;font-weight:600}
    .wt{color:var(--w);font-size:.875rem;margin-bottom:8px}
    .wt svg,.ah svg{width:18px;height:18px}
    .wa ul,.ti ul{list-style:none}
    .wa ul{font-size:.8125rem;color:#92400E}
    .wa li{padding:3px 0 3px 16px;position:relative}
    .wa li::before{content:"•";position:absolute;left:4px;color:var(--w)}
    .p{background:linear-gradient(135deg,var(--b),var(--bd));border-radius:var(--r);padding:20px;color:#fff;margin-bottom:12px}
    .ph{gap:10px;margin-bottom:12px;opacity:.9}
    .ph svg{width:20px;height:20px}
    .ph span,.ah span{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.06em}
    .pn{font-size:1.375rem;font-weight:700;margin-bottom:4px}
    .pd{font-size:.8125rem;opacity:.85;margin-bottom:16px;line-height:1.5}
    .ps{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .sp{background:rgba(255,255,255,.15);border-radius:10px;padding:10px 12px}
    .sl{font-size:.625rem;text-transform:uppercase;letter-spacing:.05em;opacity:.7;margin-bottom:2px}
    .sv{font-size:.875rem;font-weight:600}
    .dr{background:var(--sb);border-radius:var(--r);padding:20px;margin-bottom:12px}
    .dr .ph{color:var(--tm)}
    .dr .pn{color:var(--t);font-size:1.125rem}
    .dr .pd{color:var(--tm);opacity:1}
    .dr .ps{grid-template-columns:repeat(auto-fit,minmax(80px,1fr))}
    .dr .sp{background:#fff}
    .dr .sl{color:var(--tf);opacity:1}
    .dr .sv{color:var(--t)}
    .ad{background:#E0F2FE;border-radius:var(--r);padding:16px;margin-bottom:12px}
    .ah{gap:10px;color:#0369A1;margin-bottom:8px}
    .ad p{font-size:.8125rem;color:#0369A1;line-height:1.5}
    .de{background:var(--sb);border-radius:var(--r);padding:14px 16px;margin-bottom:12px}
    .dt{font-size:.8125rem;margin-bottom:6px}
    .dt svg,.at svg{width:16px;height:16px}
    .dt svg{color:var(--tm)}
    .de p,.av p{font-size:.8125rem;line-height:1.5}
    .de p{color:var(--tm)}
    .av{background:var(--ebg);border-radius:var(--r);padding:14px 16px;margin-bottom:12px}
    .at{color:var(--e);font-size:.8125rem;margin-bottom:4px}
    .av p{color:#991B1B}
    .ti{background:linear-gradient(135deg,#FFFBEB,#FEF3C7);border-radius:var(--r);padding:16px}
    .tt{gap:10px;color:var(--w);font-size:.875rem;margin-bottom:12px}
    .tt svg{width:18px;height:18px;color:var(--g)}
    .ti li{display:flex;gap:10px;padding:8px 0;font-size:.8125rem;color:#78350F;line-height:1.4;border-bottom:1px solid rgba(201,169,98,.25)}
    .ti li:last-child{border-bottom:none;padding-bottom:0}
    .ti li svg{width:14px;height:14px;color:var(--g);flex-shrink:0;margin-top:2px}
    @keyframes f{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    .fi{animation:f .25s ease-out}
  </style>
</head>
<body>
  <div class="a" id="a"></div>
  <script>
    const $='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"',
          T='><path d="M20.38 3.46L16 2a4 4 0 01-8 0L3.62 3.46a2 2 0 00-1.34 2.23l.58 3.47a1 1 0 00.99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 002-2V10h2.15a1 1 0 00.99-.84l.58-3.47a2 2 0 00-1.34-2.23z"/>';

    const I = {
      tshirt: $+' stroke-linecap="round" stroke-linejoin="round"'+T+'</svg>',
      shirt: $+T+'<path d="M12 2v6"/></svg>',
      pants: $+'><path d="M4 4h16v4l-2 14h-4l-2-10-2 10H6L4 8V4z"/></svg>',
      underwear: $+'><path d="M4 6h16v4c0 4-2 8-4 10h-8c-2-2-4-6-4-10V6z"/><path d="M12 6v14"/></svg>',
      towel: $+'><rect x="3" y="5" width="18" height="14" rx="2"/><path d="M3 9h18"/></svg>',
      bed: $+'><path d="M2 9V5a2 2 0 012-2h16a2 2 0 012 2v4"/><path d="M2 11v6a2 2 0 002 2h16a2 2 0 002-2v-6"/><path d="M2 11h20"/></svg>',
      activewear: $+'><circle cx="12" cy="5" r="3"/><path d="M12 8v8M8 12l-4 6M16 12l4 6"/></svg>',
      heart: $+'><path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/></svg>',
      sweater: $+T+'<path d="M4 13h16"/></svg>',
      jacket: $+'><path d="M16 2l4 4v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6l4-4M12 2v6M4 6h16"/></svg>',
      jeans: $+'><path d="M4 4h16v4l-2 14h-4l-2-8-2 8H6L4 8V4zM8 4v4M16 4v4"/></svg>',
      check: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>',
      warn: $+'><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0zM12 9v4M12 17h.01"/></svg>',
      bulb: $+'><path d="M9 18h6M10 22h4M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0018 8 6 6 0 006 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 019 14"/></svg>',
      refresh: $+'><path d="M23 4v6h-6M1 20v-6h6M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/></svg>',
      washer: $+'><rect x="3" y="2" width="18" height="20" rx="2"/><circle cx="12" cy="13" r="5"/><path d="M7 6h.01M12 6h2"/></svg>',
      dryer: $+'><rect x="3" y="2" width="18" height="20" rx="2"/><circle cx="12" cy="13" r="5"/><path d="M9 13c1-1 3-1 4 0s3 1 4 0"/></svg>',
      wind: $+'><path d="M17.7 7.7a2.5 2.5 0 111.8 4.3H2M9.6 4.6A2 2 0 1111 8H2M12.6 19.4A2 2 0 1014 16H2"/></svg>',
      star: $+'><path d="M12 3l1.5 5.5L19 10l-5.5 1.5L12 17l-1.5-5.5L5 10l5.5-1.5L12 3z"/></svg>',
      ban: $+'><circle cx="12" cy="12" r="10"/><path d="M4.93 4.93l14.14 14.14"/></svg>',
      beaker: $+'><path d="M4.5 3h15M6 3v16a2 2 0 002 2h8a2 2 0 002-2V3M6 14h12"/></svg>',
      soilLight: $+'><circle cx="12" cy="12" r="1.5"/></svg>',
      soilNormal: $+'><circle cx="12" cy="8" r="1.5"/><circle cx="8" cy="14" r="1.5"/><circle cx="16" cy="14" r="1.5"/></svg>',
      soilHeavy: $+'><circle cx="12" cy="6" r="1.5"/><circle cx="7" cy="11" r="1.5"/><circle cx="17" cy="11" r="1.5"/><circle cx="9" cy="17" r="1.5"/><circle cx="15" cy="17" r="1.5"/></svg>'
    };

    const G = [
      {id:'tshirts',l:'T-Shirts & Tops',i:'tshirt',f:'cotton'},
      {id:'shirts',l:'Dress Shirts',i:'shirt',f:'blend'},
      {id:'pants',l:'Trousers',i:'pants',f:'blend'},
      {id:'jeans',l:'Jeans & Denim',i:'jeans',f:'denim'},
      {id:'underwear',l:'Underwear & Socks',i:'underwear',f:'cotton'},
      {id:'towels',l:'Towels',i:'towel',f:'cotton'},
      {id:'bedding',l:'Bed Linen',i:'bed',f:'cotton'},
      {id:'activewear',l:'Sportswear',i:'activewear',f:'synthetic'},
      {id:'delicates',l:'Delicates',i:'heart',f:'delicate'},
      {id:'knitwear',l:'Knitwear',i:'sweater',f:'wool'},
      {id:'jackets',l:'Jackets',i:'jacket',f:'outdoor'}
    ];

    const K = [
      {id:'white',l:'White',w:'w'},
      {id:'light',l:'Light Colours',w:'l'},
      {id:'bright',l:'Bright Colours',w:'b'},
      {id:'dark',l:'Dark Colours',w:'d'},
      {id:'mixed',l:'Mixed Colours',w:'m'}
    ];

    const O = [
      {id:0,l:'Lightly Soiled',i:'soilLight'},
      {id:1,l:'Normal',i:'soilNormal'},
      {id:2,l:'Heavily Soiled',i:'soilHeavy'}
    ];

    const W = {
      'Cottons Pro':{t:'60°C',s:'1400 rpm',l:'7.0 kg',u:'0:59',d:'Everyday cotton items. Adjusts to soil level.'},
      'Whites (90)':{t:'90°C',s:'1600 rpm',u:'1:11',d:'Maximum hygiene for heavily soiled whites.'},
      'Whites (75)':{t:'75°C',s:'1600 rpm',u:'1:11',d:'Hygienic wash for whites and light colours.'},
      'Colored Items (60)':{t:'60°C',s:'1600 rpm',u:'0:59',d:'Coloured cottons at higher temperature.'},
      'Colored Items (20)':{t:'20°C',s:'1600 rpm',u:'1:09',d:'Energy-saving for lightly soiled colours.'},
      'Minimum Iron (40)':{t:'40°C',s:'1000 rpm',u:'0:40',d:'Synthetics and blends. Reduces creasing.'},
      'Delicates (30)':{t:'30°C',s:'600 rpm',u:'0:37',d:'Gentle cycle for delicate fabrics.'},
      'Dark Garments':{t:'40°C',s:'1200 rpm',u:'0:45',d:'Protects dark colours. Higher water, 3 rinses, reduced spin.'},
      Denim:{t:'40°C',s:'1000 rpm',u:'0:42',d:'Gentle on denim, preserves colour and fit.'},
      Shirts:{t:'40°C',s:'800 rpm',u:'0:35',d:'Gentle mechanics and low spin minimize creasing.'},
      Towels:{t:'40°C',s:'1400 rpm',l:'5.5 kg',u:'0:41',d:'High temp for hygiene, thorough rinsing for absorbency.'},
      Express:{t:'30°C',s:'1400 rpm',u:'0:20',d:'Quick 20-min wash for lightly soiled items only.'}
    };

    const Y = {
      'Cottons (Closet +)':{v:'Normal +',l:'8.0 kg',u:'0:36',d:'Thick towels, bathrobes. Ready to store.'},
      'Cottons (Closet)':{v:'Normal',l:'8.0 kg',u:'0:35',d:'Everyday cotton. Ready to fold and store.'},
      'Cottons (Iron)':{v:'Hand Iron',l:'8.0 kg',u:'0:35',d:'Slightly damp, ideal for ironing.'},
      'Cottons (Spin)':{v:'Machine Iron',l:'8.0 kg',u:'0:35',d:'Very damp, for items to line dry after.'},
      'Minimum Iron (Closet)':{v:'Normal',l:'4.0 kg',u:'0:24',d:'Synthetics and blends. Limits wrinkles.'},
      'Minimum Iron (Iron)':{v:'Hand Iron',l:'4.0 kg',u:'0:24',d:'Synthetics, slightly damp for ironing.'},
      'Delicates (Closet)':{v:'Normal',l:'4.0 kg',u:'0:46',d:'Delicate synthetics and lingerie.'},
      Shirts:{v:'Normal',l:'2.0 kg',u:'0:20',d:'Reduces creasing. Remove and hang immediately.'},
      'Smoothing (Iron)':{l:'1.0 kg',u:'0:05',d:'Freshens and relaxes wrinkles with steam.'},
      Woolens:{l:'2.0 kg',u:'0:05',d:'Fluff and freshen only. Air dry flat after.'},
      Express:{v:'Normal',l:'4.0 kg',u:'0:29',d:'Fast dry for small loads.'},
      'Timed Drying Warm Air (40)':{l:'8.0 kg',u:'0:40',d:'Gentle warm air for delicate items with trims.'}
    };

    let S = {items:[],color:'mixed',soil:1,show:0};

    function rec() {
      let {items:t,color:c,soil:s} = S,
          warn = [],
          tips = [],
          avoid = [],
          det = '',
          air = [],
          prog = 'Cottons Pro',
          dry = 'Cottons (Closet)',
          dryPlus = 'Cottons (Closet +)',
          fab = t.map(id=>G.find(g=>g.id===id)?.f).filter(Boolean),
          hW = fab.includes('wool'),
          hS = fab.includes('synthetic'),
          hD = fab.includes('delicate'),
          hJ = fab.includes('denim'),
          hO = fab.includes('outdoor'),
          hT = t.includes('towels'),
          hB = t.includes('bedding'),
          hSh = t.includes('shirts'),
          hU = t.includes('underwear'),
          iD = c==='dark',
          iW = c==='white',
          iM = c==='mixed',
          iL = s===0,
          iH = s===2;

      iM && warn.push('New dark items can transfer dye. Wash separately first.');
      hD && hT && warn.push('Towel lint will stick to delicates. Wash separately.');
      hJ && iW && warn.push('Denim can bleed onto whites. Wash separately.');
      hT && (hS||hD) && warn.push('Heavy cottons can crush light synthetics in the dryer.');

      if (hW) {
        prog = 'Delicates (30)';
        dry = 'Woolens';
        tips.push('Use wool detergent only (enzyme-free).','Turn inside out to prevent pilling.');
        air.push('Reshape while damp, dry flat on a towel.');
        det = 'Wool detergent (enzyme-free). Miele WoolCare recommended.';
        avoid.push('Never use bio/enzyme detergent on wool','Check care label before tumble drying');
        (hT||hB) && warn.push('Wash wool separately from heavy items.');
      } else if (hD) {
        prog = 'Delicates (30)';
        dry = 'Delicates (Closet)';
        tips.push('Use a mesh laundry bag to protect items.','Check all zips, hooks and buttons are closed.');
        air.push('Hang or lay flat to dry immediately.');
        det = 'Mild liquid detergent. No bleach.';
        avoid.push('Never tumble dry items with "no tumble dry" symbols');
      } else if (hJ) {
        prog = 'Denim';
        dry = 'Minimum Iron (Closet)';
        tips.push('Turn jeans inside out to preserve colour.','Wash with similar colours to prevent fading.');
        air.push('Hang by waistband to maintain shape.');
        det = 'Liquid detergent (no zeolites for dark denim).';
        avoid.push('Avoid tumble drying to preserve fit and colour');
      } else if (hSh && !hT && !hB) {
        prog = 'Shirts';
        dry = 'Shirts';
        tips.push('Unbutton collars, cuffs and fronts.','Remove from dryer immediately to avoid wrinkles.');
        air.push('Hang on hangers immediately while damp.');
        det = 'Liquid detergent.';
      } else if (hO) {
        prog = 'Minimum Iron (40)';
        dry = 'Timed Drying Warm Air (40)';
        tips.push('Close all zips and empty all pockets.','Turn items inside out to protect outer coatings.');
        air.push('Hang to air dry fully.');
        det = 'Technical wash detergent. No fabric softener.';
        avoid.push('Never use fabric softener on outdoor gear');
      } else if (hS && !hT) {
        prog = 'Minimum Iron (40)';
        dry = 'Minimum Iron (Closet)';
        tips.push('Turn inside out to reduce pilling.','Wash sooner after gym use to prevent odours.');
        air.push('Hang to dry. Avoid direct sunlight.');
        det = 'Liquid detergent. No fabric softener.';
        avoid.push('Fabric softener reduces moisture wicking');
      } else if (hT) {
        prog = 'Towels';
        dry = 'Cottons (Closet +)';
        tips.push('Shake well before drying for fluffiness.','Avoid detergent buildup by using correct dose.');
        air.push('Hang in direct sunlight if possible.');
        det = 'Powder detergent. No fabric softener.';
        avoid.push('Never use fabric softener—reduces absorbency');
      } else if (hB) {
        prog = iW&&iH ? 'Whites (90)' : iW ? 'Whites (75)' : iH ? 'Colored Items (60)' : 'Cottons Pro';
        dry = 'Cottons (Closet +)';
        tips.push('Wash sheets and duvet covers separately.');
        air.push('Hang on line, shake occasionally while drying.');
        det = iW ? 'Powder with bleaching agents.' : 'Liquid detergent for colours.';
      } else if (hU && t.length<=2) {
        prog = iW ? 'Whites (75)' : 'Colored Items (60)';
        dry = 'Cottons (Closet)';
        tips.push('60°C+ recommended for hygiene.');
        air.push('Hang to dry on a rack or line.');
        det = 'Bio/enzyme powder detergent.';
      } else if (iD) {
        prog = 'Dark Garments';
        dry = 'Minimum Iron (Closet)';
        tips.push('Turn all items inside out before washing.','Uses higher water and 3 rinses to prevent residue.');
        air.push('Dry in shade to prevent fading.');
        det = 'Liquid detergent (no zeolites) to avoid white marks.';
        avoid.push('Avoid overdrying—pulls can damage fabric');
      } else if (iW) {
        prog = iH ? 'Whites (90)' : 'Whites (75)';
        dry = 'Cottons (Closet)';
        tips.push('Separate whites for maximum brightness.','Check items are truly white before washing hot.');
        air.push('Sunlight naturally whitens and sanitizes.');
        det = 'Powder with bleaching agents for best results.';
      } else {
        iL ? (prog='Express',dry='Cottons (Closet)',tips.push('Express is for lightly worn items only.'))
           : iH ? (prog='Colored Items (60)',dry='Cottons (Closet +)')
           : (prog='Cottons Pro',dry='Cottons (Closet)');
        air.push('Shake items well before hanging.');
        det = 'Liquid detergent for colours.';
      }

      iH && (tips.push('Pre-treat stains: apply detergent, wait 10-15 mins.'),avoid.push('Never tumble dry until stains are gone—heat sets stains'));
      iM && tips.push('Use colour-catcher sheets to prevent dye transfer.');
      t.length>5 && warn.push('Avoid overloading—reduces rinse quality and increases wrinkles.');

      let w = W[prog],
          y = Y[dry];

      return {
        wash: {p:prog,...w},
        dry: y ? {p:dry,...y} : null,
        warn,
        tips: [...new Set(tips)].slice(0,5),
        det,
        avoid: [...new Set(avoid)],
        air: [...new Set(air)].slice(0,2)
      };
    }

    function render() {
      let e = document.getElementById('a'),
          ok = S.items.length && S.color,
          h = '<div class="s"><div class="st">What are you washing?</div><div class="rs">';

      G.forEach(g => {
        let x = S.items.includes(g.id);
        h += '<button class="r'+(x?' x':'')+'" onclick="toggle(\''+g.id+'\')"><span class="ri">'+I[g.i]+'</span><span class="rl">'+g.l+'</span><div class="rc">'+I.check+'</div></button>';
      });

      h += '</div></div><div class="s"><div class="st">Colour</div><div class="rs">';

      K.forEach(c => {
        let x = S.color===c.id;
        h += '<button class="r'+(x?' x':'')+'" onclick="setColor(\''+c.id+'\')"><span class="sw sw-'+c.w+'"></span><span class="rl">'+c.l+'</span><div class="rc">'+I.check+'</div></button>';
      });

      h += '</div></div><div class="s"><div class="st">How dirty?</div><div class="rs">';

      O.forEach(o => {
        let x = S.soil===o.id;
        h += '<button class="r'+(x?' x':'')+'" onclick="setSoil('+o.id+')"><span class="si">'+I[o.i]+'</span><span class="rl">'+o.l+'</span><div class="rc">'+I.check+'</div></button>';
      });

      h += '</div></div><button class="bg" onclick="go()"'+(ok?'':' disabled')+'>Get Settings</button>';
      S.show || (h += '<button class="br" onclick="reset()">'+I.refresh+' Start Over</button>');

      if (S.show && ok) {
        let r = rec();
        h += '<div class="re fi"><div class="rh"><div class="rx">'+I.check+'</div><h2 class="rt">Your Settings</h2></div>';

        r.warn.length && (h += '<div class="wa"><div class="wt">'+I.warn+' Important</div><ul>',r.warn.forEach(w=>h+='<li>'+w+'</li>'),h+='</ul></div>');

        h += '<div class="p"><div class="ph">'+I.washer+'<span>Washing Machine</span></div><div class="pn">'+r.wash.p+'</div><div class="pd">'+r.wash.d+'</div><div class="ps"><div class="sp"><div class="sl">Temp</div><div class="sv">'+r.wash.t+'</div></div><div class="sp"><div class="sl">Spin</div><div class="sv">'+r.wash.s+'</div></div>'+(r.wash.l?'<div class="sp"><div class="sl">Max Load</div><div class="sv">'+r.wash.l+'</div></div>':'')+'</div></div>';

        r.dry && (h += '<div class="dr"><div class="ph">'+I.dryer+'<span>If Using Dryer</span></div><div class="pn">'+r.dry.p+'</div><div class="pd">'+r.dry.d+'</div><div class="ps"><div class="sp"><div class="sl">Duration</div><div class="sv">'+r.dry.u+'</div></div><div class="sp"><div class="sl">Max Load</div><div class="sv">'+r.dry.l+'</div></div>'+(r.dry.v?'<div class="sp"><div class="sl">Level</div><div class="sv">'+r.dry.v+'</div></div>':'')+'</div></div>');

        r.air.length && (h += '<div class="ad"><div class="ah">'+I.wind+'<span>If Air Drying</span></div><p>'+r.air.join(' ')+'</p></div>');

        r.det && (h += '<div class="de"><div class="dt">'+I.beaker+' Detergent</div><p>'+r.det+'</p></div>');

        r.avoid.length && (h += '<div class="av"><div class="at">'+I.ban+' Avoid</div><p>'+r.avoid.join('. ')+'.</p></div>');

        r.tips.length && (h += '<div class="ti"><div class="tt">'+I.bulb+' Tips</div><ul>',r.tips.forEach(t=>h+='<li>'+I.star+'<span>'+t+'</span></li>'),h+='</ul></div>');

        h += '</div><button class="br" onclick="reset()">'+I.refresh+' Start Over</button>';
      }

      e.innerHTML = h;

      S.show && setTimeout(() => {
        let r = document.querySelector('.re');
        r && r.scrollIntoView({behavior:'smooth',block:'start'});
      }, 50);
    }

    function toggle(id) {
      let i = S.items.indexOf(id);
      ~i ? S.items.splice(i,1) : S.items.push(id);
      S.show = 0;
      render();
    }

    function setColor(id) {
      S.color = S.color===id ? null : id;
      S.show = 0;
      render();
    }

    function setSoil(v) {
      S.soil = v;
      S.show = 0;
      render();
    }

    function go() {
      S.show = 1;
      render();
    }

    function reset() {
      S = {items:[],color:'mixed',soil:1,show:0};
      render();
      scrollTo(0,0);
    }

    render();
  </script>
</body>
</html>
